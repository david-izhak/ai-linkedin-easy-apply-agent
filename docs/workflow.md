# 🔄 Схема работы LinkedIn Easy Apply Bot

## Архитектура проекта

```
┌─────────────────────────────────────────────────────────────┐
│                        main.py                              │
│                    (Orchestrator)                           │
└─────────────────────────────────────────────────────────────┘
                            │
                            │
        ┌───────────────────┼───────────────────┐
        │                   │                   │
        ▼                   ▼                   ▼
┌───────────────┐   ┌──────────────┐   ┌──────────────┐
│   Discovery   │   │  Enrichment  │   │  Processing  │
│    Phase      │   │    Phase     │   │    Phase     │
└───────────────┘   └──────────────┘   └──────────────┘
        │                   │                   │
        ▼                   ▼                   ▼
┌───────────────┐   ┌──────────────┐   ┌──────────────┐
│ fetch_jobs.py │   │ fetch_jobs.py│   │   apply.py   │
│  (searching)  │   │  (scraping)  │   │  (applying)  │
└───────────────┘   └──────────────┘   └──────────────┘
```

## Поток данных

### 📍 Discovery Phase (Поиск вакансий)

```
┌──────────────┐
│  LinkedIn    │
│  Job Search  │
└──────┬───────┘
       │ (поиск по ключевым словам)
       ▼
┌─────────────────────┐
│ fetch_job_links()   │  ← MAX_JOBS_TO_DISCOVER
│ Находит 10 вакансий │
└──────┬──────────────┘
       │
       ▼
┌──────────────┐
│  jobs.db     │
│  (status:    │
│  discovered) │
└──────────────┘
```

**Что происходит:**
1. Бот ищет вакансии по ключевым словам
2. Сохраняет ссылки и базовую информацию
3. **НЕ открывает** страницы вакансий
4. **НЕ подает** заявки

**Лимит:** `MAX_JOBS_TO_DISCOVER = 10`

---

### 🔍 Enrichment Phase (Обогащение данными)

```
┌──────────────┐
│  jobs.db     │
│  (discovered)│
└──────┬───────┘
       │
       ▼
┌──────────────────────┐
│ fetch_job_details()  │  ← MAX_JOBS_TO_ENRICH
│ Открывает страницы   │
│ вакансий и собирает  │
│ детальную информацию │
└──────┬───────────────┘
       │
       ▼
┌──────────────┐
│  jobs.db     │
│  (status:    │
│  enriched)   │
└──────────────┘
```

**Что происходит:**
1. Бот открывает страницы найденных вакансий
2. Собирает описание, требования, детали компании
3. Сохраняет в базу данных
4. **НЕ подает** заявки

**Лимит:** `MAX_JOBS_TO_ENRICH = 5`

---

### 📝 Processing Phase (Обработка и заявки)

```
┌──────────────┐
│  jobs.db     │
│  (enriched)  │
└──────┬───────┘
       │
       ▼
┌──────────────────────┐
│ Фильтрация вакансий  │
│ (LLM + Regex)        │
└──────┬───────────────┘
       │ (подходит?)
       ▼
    ┌─────┐
    │ NO  │─────► Пометить как "skipped"
    └─────┘
       │
    ┌─┴──┐
    │YES │
    └─┬──┘
      │
      ▼
┌──────────────────────┐
│ Генерация письма     │
│ (если SUBMIT)        │
└──────┬───────────────┘
       │
       ▼
┌─────────────────────────┐
│ Заполнение формы        │
│ - Персональные данные   │
│ - Резюме                │
│ - Ответы на вопросы    │
└──────┬──────────────────┘
       │
       ▼ (SUBMIT?)
    ┌─────┐
    │ NO  │─────► DRY RUN (не отправляет)
    └─────┘
       │
    ┌─┴──┐
    │YES │
    └─┬──┘
      │
      ▼
┌──────────────┐
│  RE ТОЛЬКО   │
│  ОТПРАВЛЕНО  │
└──────────────┘
```

**Что происходит:**
1. Бот берет обогащенные вакансии из базы
2. Фильтрует их (проверяет совместимость)
3. Генерирует сопроводительное письмо (LLM)
4. Заполняет форму заявки
5. **Отправляет** (только с параметром `SUBMIT`)

**Лимиты:**
- `MAX_APPLICATIONS_PER_DAY = 3`
- Проверяется дневной лимит заявок

---

## Режимы работы (BOT_MODE)

```
┌──────────────────────────────────────────┐
│              BOT_MODE                    │
│                                          │
│  ┌──────────────┐  ┌──────────────┐    │
│  │ discovery    │  │ enrichment   │    │
│  │ (поиск)      │  │ (обогащение) │    │
│  └──────────────┘  └──────────────┘    │
│                                          │
│  ┌──────────────┐  ┌──────────────┐    │
│  │ processing   │  │ full_run     │    │
│  │ (заявки)     │  │ (все этапы)  │    │
│  └──────────────┘  └──────────────┘    │
└──────────────────────────────────────────┘
```

### Режимы:

1. **`"discovery"`** - только поиск вакансий
2. **`"enrichment"`** - только обогащение данными
3. **`"processing"`** - только подача заявок
4. **`"full_run"`** - все три этапа подряд

---

## Рекомендуемая последовательность

### Для первого запуска (минимальный тест):

```
1. Discovery
   ├─ Находит 5 вакансий
   └─ Сохраняет в БД
       
2. Enrichment
   ├─ Обогащает 3 вакансии
   └─ Сохраняет детали
       
3. Processing (DRY RUN)
   ├─ Фильтрует вакансии
   ├─ Заполняет формы
   └─ НЕ отправляет
       
4. Processing (SUBMIT)
   ├─ Фильтрует вакансии
   ├─ Заполняет формы
   └─ ОТПРАВЛЯЕТ 1 заявку
```

### Для регулярной работы:

```
Full Run (один запуск)
├─ Discovery (находит до 10)
├─ Enrichment (обогащает до 5)
└─ Processing (отправляет до 3)
```

---

## База данных (jobs.db)

```
Таблица: vacancies
┌─────────────┬─────────┬────────────┬────────┬─────────┬──────────┐
│    id       │  title  │  company   │ status │ created │ details  │
├─────────────┼─────────┼─────────────┼────────┼─────────┼──────────┤
│  1001       │  Dev    │  Company A │discovered│ ... │    ...    │
│  1002       │  Dev    │  Company B │ enriched │ ... │  details  │
│  1003       │  Dev    │  Company C │  applied │ ... │  details  │
│  1004       │  Dev    │  Company D │skipped   │ ... │  details  │
└─────────────┴─────────┴────────────┴─────────┴─────────┴──────────┘

Статусы:
- discovered  → найдена, ждет обогащения
- enriched    → обогащена данными, ждет обработки
- applied     → заявка подана успешно
- skipped     → пропущена фильтром
- error       → ошибка при обработке
```

---

## Запуск команд

```bash
# Discovery (поиск)
python main.py

# Enrichment (обогащение)
python main.py

# Processing - DRY RUN (тест БЕЗ отправки)
python main.py

# Processing - REAL RUN (отправка заявок) ⚠️
python main.py SUBMIT
```

---

## Лимиты и ограничения

```
┌─────────────────────────────────┐
│      КОНФИГУРАЦИЯ ЛИМИТОВ       │
├─────────────────────────────────┤
│                                 │
│ MAX_JOBS_TO_DISCOVER = 10       │
│   └─› Находит до 10 вакансий    │
│                                 │
│ MAX_JOBS_TO_ENRICH = 5          │
│   └─› Обогащает до 5 вакансий   │
│                                 │
│ MAX_APPLICATIONS_PER_DAY = 3    │
│   └─› Отправляет до 3 заявок/день│
│                                 │
└─────────────────────────────────┘
```

---

## Безопасность

```
ВАЖНО: Начните с малых чисел!

┌─────────────────────────────────────┐
│  Для первого запуска:               │
├─────────────────────────────────────┤
│  MAX_JOBS_TO_DISCOVER = 5          │
│  MAX_JOBS_TO_ENRICH = 3            │
│  MAX_APPLICATIONS_PER_DAY = 1      │
└─────────────────────────────────────┘

Затем постепенно увеличивайте!
```

---

## Мониторинг

```
Логи в консоли покажут:
├─ INFO:  нормальные операции
├─ WARNING: проблемы, которые обработаны
└─ ERROR: ошибки, требующие внимания

База данных (jobs.db):
├─ Просмотрите статусы вакансий
├─ Проверьте количество заявок
└─ Убедитесь, что всё работает корректно
```

---

**Подробная инструкция:** См. [Руководство по началу работы](getting-started.md)

---

## Дополнительная информация

- [Архитектура проекта](architecture.md)
- [Описание компонентов](components.md)
- [Схема базы данных](database-schema.md)
- [Руководство по началу работы](getting-started.md)
- [LLM интеграция](llm-integration.md)
- [Тестирование](testing.md)















